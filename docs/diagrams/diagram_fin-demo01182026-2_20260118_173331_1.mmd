graph TD
    Client[Client - React JS]
    Gateway[Azure API Management]
    AuthService[Authentication Service -- Spring Boot]
    UserService[User Service -- Spring Boot]
    CRMService[CRM Integration Service -- Spring Boot]
    KYCService[KYC/AML Service -- Spring Boot]
    DB[(Azure SQL Database)]
    BlobStorage[(Azure Blob Storage)]
    Redis[(Azure Cache for Redis)]
    EventHub[Azure Event Hubs]
    FunctionApp[Azure Functions]

    Client -->|HTTPS Requests| Gateway
    Gateway --> AuthService
    Gateway --> UserService
    Gateway --> CRMService
    Gateway --> KYCService

    AuthService -->|Token Generation| Client
    AuthService -->|Verify Identity| KYCService
    AuthService -->|User Data| UserService
    UserService -->|CRUD Operations| DB
    CRMService -->|Data Sync| DB
    KYCService -->|Verify Documents| BlobStorage
    UserService -->|Logs| EventHub
    CRMService -->|Logs| EventHub
    KYCService -->|Logs| EventHub
    FunctionApp -->|Process Events| EventHub
    FunctionApp -->|Trigger Actions| DB

    classDef azure fill:#f0f,stroke:#333,stroke-width:2px;
    class Gateway,AuthService,UserService,KYCService,CRMService,FunctionApp azure;
    classDef database fill:#ff9,stroke:#333,stroke-width:2px;
    class DB,BlobStorage,Redis database;